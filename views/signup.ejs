<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script
    type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
  <!-- Custom Theme files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- //Custom Theme files -->
  <!-- web font -->
  <!-- //web font -->
  <style>
    .error {
      color: rgb(255, 136, 0);
      font-family: popins;
      font-style: italic;
    }
  </style>
</head>

<body style="background-color: rgb(255, 136, 0);">

  <form action="/signup" id="signup" method="post" enctype="multipart/form-data">
    <section class="vh-100" style="background-color: rgb(255, 136, 0);">
      <div class="container h-100" style="background-color: rgb(255, 136, 0);">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-lg-12 col-xl-11">
            <div class="card text-black" style="border-radius: 25px;">
              <div class="card-body">
                <div class="row justify-content-center">
                  <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Sign up</p>
                  <div class="col-md-10 col-lg-6 col-xl-5 ">
                    <% if(typeof messages!=='undefined'){
                      %>
                      <p style="color: rgb(255, 136, 0);"><%- messages %></p><br>
                      <%
                      }
                      %>
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                        
                        <input type="text" name="name" id="name" placeholder="Fullname" class="form-control" />
                        <label class="form-label" for="form3Example1c">Your Name</label>
                        <lebel id="nameError" class="error"></lebel>
                      </div>
                    </div>

                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                      
                        <input type="text" id="email" name="email" placeholder="Email" class="form-control" />
                        <label class="form-label" for="form3Example3c">Your Email</label>
                        <lebel id="emailError" class="error"></lebel>
                    
                      </div>
                    </div>
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fa fa-link fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                        <input name="reference" id="reference" placeholder="Enter a reference link" class="form-control" />
                        <label class="form-label" for="form3Example3c">Reference Link</label>
                      </div>
                    </div>
                 

                  </div>
                  <div class="col-md-10 col-lg-6 col-xl-5 ">
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-mobile-alt fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                       
                        <input type="text" name="mobile" id="phone" placeholder="Mobile" class="form-control" />
                        <label class="form-label" for="form3Example1c">Your Phone</label>
                        <lebel id="phoneError" class="error"></lebel>
                      </div>
                    </div>

                    

                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                       
                        <input id="password" type="password" name="password" placeholder="Password"
                          class="form-control" />
                        <label class="form-label" for="form3Example4c">Password</label>
                        <lebel id="passwordError" class="error"></lebel>
                      </div>
                    </div>

                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                      
                        <input id="confirmPassword" type="password" name="conformpassword"
                          placeholder="Confirm Password" class="form-control" />
                        <label class="form-label" for="form3Example4cd">Repeat your password</label>
                        <lebel id="confirmPasswordError" class="error"></lebel>
                      </div>
                    </div>

                  </div>
                  <div class="form-check d-flex justify-content-center mb-5">
                    <input class="form-check-input me-2" type="checkbox" value="" id="checkboxTerms" />
                    <label class="form-check-label" for="form2Example3">
                      I agree to all statements in <a href="">Terms of service</a>
                      <lebel id="checkboxTermsError" class="error"></lebel>
                      
                    </label>
                  </div>
             

                  <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                    <input type="submit" class="btn"
                    style="color: #fff;font-weight: bold; background-color:rgb(242, 129, 35);"
                     value="Register now">


                  </div>
                  <h6>Already have an Account? <a href="/login"> Login Now!</a></h6>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </form>
</body>

<script>
  const form = document.getElementById('signup');
  const nameInput = document.getElementById('name');
  const emailInput = document.getElementById('email');
  const phoneInput = document.getElementById('phone');
  const passwordInput = document.getElementById('password');
  const confirmPasswordInput = document.getElementById('confirmPassword');
  const checkboxTerms=document.getElementById('checkboxTerms')

  //   nameInput.addEventListener("mouseleave",function(){
  // 	if()
  //   })


  form.addEventListener('submit', function (event) {
    event.preventDefault(); // Prevent form submission

    // Clear previous error messages
    clearErrors();

    // Validate name field
    if (nameInput.value.trim() === '') {
      showError('name', 'Name is required');
    }
    else if ((nameInput.value.trim()).length < 2) {
      showError('name', 'Minimum 2 characters needed')
    } else if (!isValidName(nameInput.value.trim())) {
      showError('name', 'Please enter alphabets')
    }

    // Validate email field
    if (emailInput.value.trim() === '') {
      showError('email', 'Email is required');
    } else if (!isValidEmail(emailInput.value.trim())) {
      showError('email', 'Invalid email format');
    }

    // Validate phone field
    if (phoneInput.value.trim() === '') {
      showError('phone', 'Phone number is required');
    }
    else if (((phoneInput.value.trim()).length < 10)) {
      showError('phone', 'Phone number aleast 10 numbers')
    }
    else if (!isValidPhone(phoneInput.value.trim())) {
      showError('phone', 'Please enter numbers')
    }

    // Validate password field
    if (passwordInput.value.trim() === '') {
      showError('password', 'Password is required');
    } else if ((passwordInput.value.trim()).length < 6) {
      showError('password', "Poor password")
    }
    else if (!isWeekPassword(passwordInput.value.trim())) {
      showError('password', 'Week password')
    }

    // Validate confirm password field
    if (confirmPasswordInput.value.trim() === '') {
      showError('confirmPassword', 'Confirm Password is required');
    } else if (confirmPasswordInput.value !== passwordInput.value) {
      showError('confirmPassword', 'Passwords do not match');
    }
    if(!checkboxTerms.checked){
      showError('checkboxTerms', 'Conformation required');
    }

    // Submit the form if there are no errors
    if (isFormValid()) {
      form.submit();
    }
  });

  function showError(inputId, errorMessage) {
    const errorElement = document.getElementById(`${inputId}Error`);
    errorElement.textContent = errorMessage;
  }

  function clearErrors() {
    const errorElements = document.getElementsByClassName('error');
    Array.from(errorElements).forEach(function (errorElement) {
      errorElement.textContent = '';
    });
  }
  function isWeekPassword(password) {
    // Regular expression for password validation (case-insensitive)
    const passwordRegex = /^(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/i;
    return passwordRegex.test(password);
  }

  function isValidName(name) {
    // Regular expression for name validation
    const nameRegex = /^[a-zA-Z]+$/;
    return nameRegex.test(name);
  }
  function isValidPhone(phone) {
    // Regular expression for number validation
    const phoneRegex = /^[0-9]+$/;
    return phoneRegex.test(phone);
  }

  function isValidEmail(email) {
    // Regular expression for email validation
    const emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
    return emailRegex.test(email);
  }

  function isFormValid() {
    const errorElements = document.getElementsByClassName('error');
    let isValid = true;
    Array.from(errorElements).forEach(function (errorElement) {
      if (errorElement.textContent !== '') {
        isValid = false;
      }
    });
    return isValid;
  }


</script>

</html>